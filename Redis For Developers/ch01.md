# 01. 마이크로서비스 아키텍처와 레디스

## NoSQL
### NoSQL의 등장 배경
>최근 디지털 산업의 엄청난 성장으로 인해 **모놀리틱 아키텍처**에서 **마이크로서비스 아키텍처**로 변화되면서 데이터 저장소의 특징 역시 다양하게 변화되면서 등장하게 되었다.

#### 모놑리틱 아키텍처
전통적인 소프트웨어 개발 모델로 **전체 애플리케이션을 하나의 통합된 패키지**로 개발 및 배포하는 방식이다.
![image](https://github.com/user-attachments/assets/e70d04be-c7b0-40fc-bfa7-49667c000bf3)

출처 : https://www.nginx.com/blog/introduction-to-microservices/

**모놀리틱의 한계**
- 하나의 모듈 수정 시 전체 애플리케이션을 다시 배포
- 서버의 기동과 빌드, 배포에 장시간 소요
- 프레임워크나 언어의 변경이 전체 애플리케이션에 영향을 미쳐 작은 기능 변경도 민첩하게 대처 불가능
- 업데이트와 릴리스가 느림

작은 고무의 프로젝트나 애플리케이션에서는 모놀리틱 구조가 적합할 수 있지만 서비스의 규모가 확장되면서 복잡도가 기하급수적으로 증가한다.

#### 마이크로서비스 아키텍처
독립된 각각의 모듈을 조립해 하나의 서비스를 만드는 방식이다.
![image](https://github.com/user-attachments/assets/5987ba4d-58dd-4efe-a491-10ef855b6538)

출처 : https://www.nginx.com/blog/introduction-to-microservices/

>마이크로서비스(microservice)는 애플리케이션을 느슨히 결합된 서비스의 모임으로 구조화하는 서비스 지향 아키텍처(SOA) 스타일의 일종인 소프트웨어 개발 기법이다. 마이크로서비스 아키텍처에서 서비스들은 섬세하고 프로토콜은 가벼운 편이다. 애플리케이션을 더 조그마한 여러 서비스로 분해할 때의 장점은 모듈성을 개선시키고 애플리케이션의 이해, 개발, 테스트를 더 쉽게 해주고 애플리케이션 침식에 더 탄련적으로 만들어 준다. 규모가 작은 자율적인 팀들이 팀별 서비스를 독립적으로 개발, 전개, 규모 확장을 할 수 있게 함으로써 병렬로 개발할 수 있게 한다. 또, 지속적인 리팩토링을 통해 개개의 서비스 아키텍처가 하나로 병합될 수 있게 허용한다. 마이크로서비스 기반 아키텍처는 지속적 배포와 전개를 가능케 한다. 출처 : 위키피디아

마이크로서비스는 한가지 일만 수행하는 작은 애플리케이션을 의미하며, 쉽게 교체될 수 있고 독립적으로 개발되고 전개될 수 있는 작은 컴포넌트를 의미한다.

**마이크로서비스의 특징**
- 새로운 기능 추가 시 배포가 비교적 편리하여 요구사항에 민첩하게 대처 가능
- 서비스의 확장이 필요한 경우 원하는 서비스의 서버만 쉽게 업그레이드 가능
- 다양한 개발 도구를 자유롭게 선택 가능
- 서비스 간의 독립성으로 인해 한 서비스에서의 문제가 다른 서비스에 영향을 주지 않아 안정성 향상

다만, 소규모 팀에서는 서비스 분리로 인한 관리의 복잡도와 운영의 부담이 증가할 수 있다.

#### 데이터 저장소 요구 사항의 변화
아키텍처 변화에 따라 데이터 저장소에 대한 요구 사항도 변화되었다.

기존에는 고정된 스미카를 갖고 있는 관계형 데이터베이스(`Oracle`, `MySQL` 등)를 많이 사용하였지만 다음과 같은 제한 사항이 발생했다.
- 고정된 스키마에 의해 테이블 간의 관계를 정확히 규정
- 관계는 애플리케이션이 커질수록 매우 복잡하게 형성
- 데이터를 추출하기 위한 쿼리 또한 복잡해짐
- 성능 향상을 위해 쿼리, 인덱스, 테이블 구조를 자주 최적화해야 함
- 테이블 구조가 변경되면 관련된 코드도 수정이 필요

>스키마는 데이터베이스에서 데이터의 구조를 정의하는 설계도 역할을 한다. `테이블`, `컬럼 이름`, `데이터 타입`, `기본키`, `외래키` 등 모든 구조적 정의가 스키마에 포함된다. 고정된 스미카는 정형 데이터에 최적화되어 있어, 데이터 무결성을 보장하고 SQL 기반의 정교한 쿼리가 가능하지만 스키마 변경에 따른 명시적 작업이 추가로 필요하고, 유연성이 부족하여 데이터의 구조가 유동적일 경우 적합하지 않다.

모놀리틱 아키텍처에서는 모든 데이터를 하나의 데이터베이스에서 관리했기 때문에 중앙 집약적인 관계형 데이터 베이스를 표준으로 삼았다. 다만 다음과 같은 이유로 NoSQL의 필요성이 대두되면서 마이크로서비스 아키텍처에서는 서비스의 성격에 따라 데이터베이스를 선택적으로 적용할 수 있게 되었다.

**관계형 데이터베이스의 특성**
- 고정된 스키마 기반으로 데이터 구조가 명확하고 안정적
- 트랜잭션(ACID) 보장으로 정합성과 무결성이 중요할 때 탁월
- 조인 연산, 복잡한 쿼리에 강하여 관계 기반 데이터 분석에 유리

>ACID는 관계형 데이터베이스의 특성으로 트랜잭션이 완벽하게 실행 또는 아예 실행되지 않음을 보장하는 원자성(Atomicity), 트랜잭션 실행 전후로도 제약 조건을 만족시킴을 보장하는 일관성(Consistency), 트랜잭션 실행 시 다른 트랜잭션의 개입이 없음을 보장하는 독립성(Isolation), 성공적으로 수행된 트랜잭션은 영원히 반영되어야 함을 보장하는 지속성(Durability)으로 구성된다.

즉, 스키마가 거의 변경되지 않는 데이터에 한해서는 관계형 데이터베이스를 이용하는 것이 관리에 용이하고, 서비스의 성능에 큰 영향을 미쳤다. 다만, 시계열 또는 로그 데이터와 같은 특정 데이터는 다음과 같은 특징을 가지기에 관계형 데이터베이스에서는 오히려 성능이 저하될 수 있다.
- 데이터 양이 많고 빠르게 증가(초당 수천개 로그 또는 센서값 등)
- 쓰기 연산 비율이 매우 높음
- 컬럼이 유동적이거나, JSON 기반 비정형 형식도 많음
- 대부분은 최근 데이터를 조회
- 조인보다 단순 조회, 집계가 중심

이런 특성은 관계형 데이터베이스의 고정된 스키마 구조, 디스크 I/O 방식, 인덱싱 구조와는 충돌이 발생할 수 있기 때문에 NoSQL을 사용하는 것이 더 적합하다. 물론 최근 관계형 데이터베이스에서는 `TimescaleDB` 등의 별도 라이브러리를 이용하여 처리하기도 하며,`JSOB` 형식 등을 지원하지만 이를 적용하고 관리하기 위한 별도의 메타데이터가 요구되기 때문에 성능상 이점을 제대로 누리기는 어렵다.

### NoSQL이란?
>No SQL 또는 Not Only SQL을 의미하며, 말 그대로 SQL을 사용하지 않는 데이터 저장소임을 내포한다. 또한 관계가 정의되지 않은 데이터를 저장하는 것이 특징이다.

마이크로서비스의 저장소로 쓰일 수 있도록 여러 요구 사항을 만족시키는데 NoSQL이 가지는 일반적 특정은 다음과 같다.
- 실시간 응답 : 각각의 개별 서비스가 빠르게 동작하지 않을 때, 서비스 자체가 병복 현상을 유발 할 수 있기 때문에 빠른 응답 속도 보장
- 확장성 : 예기치 않은 트랜잭션 증가에 유연하게 확장 가능
- 고가용성 : 장애 상황에서 신속하게 복구돼 항상 사용할 수 있는 상태를 유지
- 클라우드 네이티브 : 과거 처럼 데이터베이스를 사용하기 위해 드는 번거로움을 간소화하여 즉시 사용 가능성 제공
- 단순성 : 서비스별로 적절한 데이터 모델을 사용하기 위해 멀티 모델 데이터베이스 지원
- 유연성 : 다양한 데이터 유형의 생성이 폭발적으로 증가함에 따라 비정형 데이터를 저장할 수 있는 방법을 제공

>비정형 데이터는 정해진 스카마 없이 자유로운 형식으로 저장되는 데이터를 의미한다. 테이블의 열이나 이름, 타입이 일정하지 않으며 데이터의 구조가 매번 다를 수 있다. 이러한 이유로 비정형 데이터를 다루기 위해서는 스키마의 유연성이 필요하며, 중첩 구조 지원을 통해 JSON 형태로 중첩된 데이터를 그대로 저장가능 해야하고, 수평 확장을 통해 데이터를 여러 서버로 분산해야 하며, 스키마 유효성 검증없이 쓰기 성능이 최적화 되어야 한다.

### NoSQL 데이터 저장소 유형
#### 그래프
#### 칼럼
#### 문서
#### 키-값

---

## 레디스

### 레디스란?

### 특징
#### 실시간 응답
#### 단순성
#### 고가용성
#### 확장성
#### 클라우드 네이티브 - 멀티 클라우드

### 마이크로서비스 아키텍처와 레디스
#### 데이터 저장소로서의 레디스
#### 메시지 브로커로서의 레디스
